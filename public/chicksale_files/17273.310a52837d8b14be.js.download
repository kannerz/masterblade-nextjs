"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17273],{17273:function(e,t,o){o.r(t),o.d(t,{default:function(){return et}});var n=o(30983),r=o(46215),i=o(62548),a=o(85223),l=o(83457),d=e=>{var t,o;return{criteria:new l.ZP(e.criteria),subTitle:null!==(t=e.subtitle)&&void 0!==t?t:void 0,title:e.title,url:null!==(o=e.url)&&void 0!==o?o:void 0}},s=e=>({suggestions:e.results.map(d),themes:(0,i.Z)(e.theme_results),vendors:e.vendor_results.map(a.Z)});function c(){return(c=(0,n.Z)(function*(e){return s((yield(0,r.Z)("/search_suggestion/search",e,{profilerLabel:"Server.API.SearchSuggestion"})))})).apply(this,arguments)}var u=o(38753),v=o(96983),m=o(22260),p=o(35458),h=o(83023),g=o(10692),f=o(64001),y=o(81748),w=o(19901),b=o(26248),Z=o(21118),_=o(26018),E=o(99388),x=o(60131);function P(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}var O=!1;if("undefined"!=typeof window){var I={get passive(){O=!0;return}};window.addEventListener("testPassive",null,I),window.removeEventListener("testPassive",null,I)}var T="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),S=[],k=!1,j=-1,L=void 0,M=void 0,R=function(e){return S.some(function(t){return!!(t.options.allowTouchMove&&t.options.allowTouchMove(e))})},C=function(e){var t=e||window.event;return!!R(t.target)||t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1)},D=function(e){setTimeout(function(){if(void 0===M){var t=!!e&&!0===e.reserveScrollBarGap,o=window.innerWidth-document.documentElement.clientWidth;t&&o>0&&(M=document.body.style.paddingRight,document.body.style.paddingRight=o+"px")}void 0===L&&(L=document.body.style.overflow,document.body.style.overflow="hidden")})},A=function(){setTimeout(function(){void 0!==M&&(document.body.style.paddingRight=M,M=void 0),void 0!==L&&(document.body.style.overflow=L,L=void 0)})},B=function(e,t){var o=e.targetTouches[0].clientY-j;return!R(e.target)&&(t&&0===t.scrollTop&&o>0?C(e):t&&t.scrollHeight-t.scrollTop<=t.clientHeight&&o<0?C(e):(e.stopPropagation(),!0))},N=function(e,t){if(T){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}!e||S.some(function(t){return t.targetElement===e})||(S=[].concat(P(S),[{targetElement:e,options:t||{}}]),e.ontouchstart=function(e){1===e.targetTouches.length&&(j=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&B(t,e)},k||(document.addEventListener("touchmove",C,O?{passive:!1}:void 0),k=!0))}else D(t),S=[].concat(P(S),[{targetElement:e,options:t||{}}])},q=function(){T?(S.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),k&&(document.removeEventListener("touchmove",C,O?{passive:!1}:void 0),k=!1),S=[],j=-1):(A(),S=[])},H=o(56057),K=o.n(H),z=o(38955),G=o(86864),J=o(26327),W=o(65998),Y=o(61535),$=K()(()=>o.e(5602).then(o.bind(o,5602)),{loadableGenerated:{webpack:()=>[5602]}}),F=J.ZP.div.withConfig({componentId:"sc-jg0n1p-0"})(["display:block;position:fixed;overflow:hidden;z-index:",";left:0;top:0;width:100%;height:100%;background-color:",";@media ","{position:absolute;top:",";width:100%;height:auto;max-height:548px;background-color:",";box-shadow:0px 0px 24px rgba(218,218,218,0.6);border-radius:",";overflow-y:auto;z-index:",";}"],h.u.Modal,y.wL.SL100,f.Zk,e=>"x-large"===e.scale?"72px":"52px",y.wL.SL100,y.cM.Small,h.u.Header-1),U=J.ZP.div.withConfig({componentId:"sc-jg0n1p-1"})(["height:56px;width:100%;padding:0 ",";display:grid;grid-template-columns:1fr auto;align-items:center;gap:",";box-shadow:0 0 16px 0 rgba(154,171,234,0.32);background-color:",";overflow:hidden;"],y.Ki.Medium,y.Ki.Small,y.wL.SL100),Q=J.ZP.div.withConfig({componentId:"sc-jg0n1p-2"})(["padding-bottom:112px;height:100%;overflow-y:auto;@media ","{padding:0;}"],f.Zk),V=(0,J.ZP)(m.Z).withConfig({componentId:"sc-jg0n1p-3"})(["margin:0px;display:flex;align-items:center;width:100%;> input{width:100%;}"]),X=()=>{var e=(0,G.I0)(),t=()=>e((0,x.oy)(!1));return(0,Z.Z)()!==w.Z.Mobile?null:z.createElement(U,null,z.createElement(V,null,z.createElement(W.Z,{isFocus:!0,placeholder:"ค้นหา",scale:"small"})),z.createElement(v.Z,{colorPalette:"support-dark",onClick:t,scale:"small"},z.createElement(p.Z,{color:y.wL.SD025,type:"Body4-Kaidee-Regular"},"ยกเลิก")))},ee=e=>{var t,{scale:o="medium"}=e,n=(0,Z.Z)(),r=(0,G.I0)(),{isShowPreSuggestion:i}=(0,b.No)(),a=(0,b.Rp)(),l=(0,_.Z)(),d=(0,Y.Z)(null!==(t=l.c)&&void 0!==t?t:0),s=null==d?void 0:d.id,v=(0,z.useCallback)(()=>r((0,x.oy)(!1)),[r]),m=z.useRef(null);(0,u.t$)(m,v),(0,z.useEffect)(()=>(i&&n===w.Z.Mobile&&m.current?N(m.current):q(),()=>q()),[i,n]);var p=(0,g.Z)(a.keyword,200);return((0,z.useEffect)(()=>{p&&(function(e){return c.apply(this,arguments)})({cate_id:s,q:p}).then(e=>{r((0,E.JJ)({suggestions:e.suggestions})),r((0,E.Ox)({themes:e.themes})),r((0,E.c$)({vendors:e.vendors}))})},[p,r,s]),i)?z.createElement(F,{ref:m,scale:o},z.createElement(X,null),z.createElement(Q,{"data-testid":"header-search-input-suggestions"},z.createElement($,null))):null},et=(0,z.memo)(ee)},7673:function(e,t){var o,n;(n=o||(o={})).Match="match",n.Range="range",t.Z=o},83457:function(e,t,o){o.d(t,{ZP:function(){return m},xU:function(){return v}});var n,r=o(68930),i=e=>({name:e.attr_name,type:e.search_type,value:e.attr_value,valueId:e.value_id}),a=e=>{var t,o;return{from:null!==(t=e.from)&&void 0!==t?t:void 0,name:e.attr_name,to:null!==(o=e.to)&&void 0!==o?o:void 0,type:e.search_type}},l=o(7673),d=o(61236),s=o(13348);function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach(function(t){(0,r.Z)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}n||(n={});var v=e=>"range"===e.search_type?a({attr_name:e.attr_name,from:e.from,search_type:l.Z.Range,to:e.to}):i({attr_name:e.attr_name,attr_value:e.attr_value,search_type:l.Z.Match,value_id:e.value_id}),m=class{constructor(e){(0,r.Z)(this,"q",void 0),(0,r.Z)(this,"price",void 0),(0,r.Z)(this,"attributes",void 0),(0,r.Z)(this,"categoryId",void 0),(0,r.Z)(this,"provinceIds",void 0),(0,r.Z)(this,"districtIds",void 0),(0,r.Z)(this,"adType",void 0),(0,r.Z)(this,"condition",void 0),(0,r.Z)(this,"geoLocation",void 0),(0,r.Z)(this,"itemType",void 0);var{q:t,attribute:o,cate_id:n,condition:i,district_id:a,district_ids:c,geo_location:m,price:p,province_id:h,province_ids:g,ad_type:f}=e;this.q=null!=t?t:void 0,this.attributes=o?o.map(e=>v(e)):void 0,this.adType=null!=f?f:void 0,this.categoryId=null!=n?n:void 0,this.condition=null!=i?i:void 0,this.geoLocation=m?(0,d.Z)(m):void 0,this.price=p?(0,s.Z)(u(u({},p),{},{search_type:l.Z.Range})):void 0,this.districtIds=a?[a]:c,this.provinceIds=h?[h]:g}}},61236:function(e,t){var o=e=>({distanceEnd:e.distance_end,distanceStart:e.distance_start,latitude:e.lat,longitude:e.lon});t.Z=o},13348:function(e,t){var o=e=>{var t,o;return{from:null!==(t=e.from)&&void 0!==t?t:void 0,to:null!==(o=e.to)&&void 0!==o?o:void 0,type:e.search_type}};t.Z=o},85223:function(e,t){var o=e=>({adsCount:e.ads_count,displayImage:e.display_image,memberId:e.member_id,memberName:e.member_name,memberRole:e.member_role,memberType:e.member_type});t.Z=o},10692:function(e,t,o){var n=o(38955),r=(e,t)=>{var{0:o,1:r}=(0,n.useState)(e);return(0,n.useEffect)(()=>{var o=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(o)}},[e,t]),o};t.Z=r}}]);