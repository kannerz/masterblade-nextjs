"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69246],{63897:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(31962),o=r(38955),i=r(95474),c=(e,t)=>"detail"===t?e?"CHAT_MACRO":"CHAT":e?"CHAT_MACRO_LISTING":"CHAT_LISTING",a=r(50714),s=r(68930),u=r(95869),l=r(92013),p=r(90752);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var O=r(1094),d=(e,t,r,n,o,i,c)=>{var a,s={ad:r,chatType:i,memberId:t,tracking:{detail:null!=c?c:"",index:o.trackingIndex,pageSource:o.pixelTrackingPageSource,position:o.pixelTrackingPosition,section:o.pixelTrackingSection,suggest:0,uniqueId:e}};return(null===(a=n.supplementary.owner)||void 0===a?void 0:a.verifications.find(e=>"approved"===e.status))&&(s.badges=JSON.stringify(["VERIFIED_SELLER"])),s},f=e=>{var{reloadChatRooms:t}=(0,n.Z)(),{sendTrackingChatClick:r}=(0,i.Z)(),s=(0,o.useCallback)(n=>{var{ad:o,adCardPixelTracking:i,adDetail:s,customGtmVariables:u,gtm:l,isChatMacro:p,message:b,pageType:g,user:f}=n,y=f.memberId;r(d(e,y,o,s,i,c(p,g),b)),p?(0,O.QF)(o,y,l.page_section,u):(0,a.Z)({ad:o,customVariables:u,listingPageType:l.listing_pagetype,pageSection:l.page_section,subBusiness:l.sub_business,userId:y,websiteSection:l.website_section}),t(f)},[t,r,e]),b=(0,o.useCallback)(e=>{var{ad:t,gtm:r,customGtmVariables:n,user:o}=e;!function(e){var{pageSection:t,listingPageType:r,ad:n,customVariables:o={},userId:i,subBusiness:c,websiteSection:a}=e;u.Z.trigger("chat_view",g(g(g(g({},(0,l.Z)({ad:n,userId:i})),(0,p.Z)({enhancement:n.enhancement,themes:n.themes})),o),{},{listing_pagetype:r,page_section:t,sub_business:c,website_section:a}))}({ad:t,customVariables:n,listingPageType:r.listing_pagetype,pageSection:r.page_section,subBusiness:r.sub_business,userId:null==o?void 0:o.memberId,websiteSection:r.website_section})},[]);return{handleChatTracking:s,handleChatViewTracking:b}}},33452:function(e,t,r){var n=r(30983),o=r(17505),i=r(26248),c=r(60131),a=r(38955),s=r(86864),u=r(63897),l=r(78572),p=r(13582),b=r(94626),g=r(9854),O=e=>{var t,r,{0:O,1:d}=(0,a.useState)(!1),{0:f,1:y}=(0,a.useState)("NOT_SEND"),v=(0,i.aF)(),m=(0,s.I0)(),j=(0,l.C2)(),{handleChatTracking:P}=(0,u.Z)(e),{1:k}=(0,a.useContext)(o.S),w=(0,a.useCallback)((e,t,r)=>(0,p.Z)({adId:e.legacyId,text:r,user:t}),[]),I=(0,a.useCallback)((t=(0,n.Z)(function*(e,t){if(t){var{chatRoom:r}=yield w(e,t);return j({page:"/messages/[roomId]",roomId:r.roomId})}}),function(e,r){return t.apply(this,arguments)}),[w,j]),S=(0,a.useCallback)(()=>{y("NOT_SEND"),d(!1)},[]),_=(0,a.useCallback)(()=>{d(!0)},[]),h=(0,a.useCallback)((r=(0,n.Z)(function*(e,t,r,o,i,a,s,u,l){if(y("SENDING"),v){yield w(e,v,o),y("SENT"),P({ad:e,adCardPixelTracking:t,adDetail:r,customGtmVariables:l,gtm:u,isChatMacro:a,message:o,pageType:i,user:v});return}(0,b.Z)({ad:e,customVariables:l,pixelTrackingSection:t.pixelTrackingSection,userId:void 0});var p,O=(p=(0,n.Z)(function*(n){(0,g.Z)(t.pixelTrackingSection,e,n.memberId,l),yield w(e,n,o),y("SENT"),P({ad:e,adCardPixelTracking:t,adDetail:r,customGtmVariables:l,gtm:u,isChatMacro:a,message:o,pageType:i,user:n})}),function(e){return p.apply(this,arguments)});m((0,c.m8)({chatMessage:o,loginKind:"chat-login",loginState:"pre-login",sellerAvatar:e.member.displayImage})),k({payload:{onLoginCallback:O},type:"SET_LOGIN_CALLBACK"}),k({payload:{onClose:s},type:"SET_ONCLOSE"})}),function(e,t,n,o,i,c,a,s,u){return r.apply(this,arguments)}),[m,w,P,v,k]);return{handleHideQuickChatModal:S,handleRedirectChatPage:I,handleShowQuickChatModal:_,isShownQuickChatModal:O,messageStatus:f,onSendQuickChat:h}};t.Z=O},69246:function(e,t,r){r.d(t,{Z:function(){return F}});var n=r(68930),o=r(95869),i=r(38955),c=r(33452),a=r(17505),s=r(26248),u=r(60131),l=r(86864),p=r(8361);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var O=e=>{var{ad:t,tracking:{detail:r="",index:n=0,pageSource:o,position:i,section:c,suggest:a,uniqueId:s,s:u="enga.ad_card",t:l="AD_CARD"}}=e;return{adId:t.id,categoryId:t.categoryId,detail:r,index:n,pageSource:o,position:i,s:u,section:c,sellerId:t.memberId,sourceId:s,suggest:a,t:l}},d=r(77491),f=r(42102);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m=e=>{_kd.push([e.t,e])},j=()=>{var e=(0,s.aF)();return(0,i.useCallback)(t=>{var r,n=O(t);m((0,d.A)(v(v({},n),{},{component:"favorite",et:"click",memberId:null!==(r=null==e?void 0:e.memberId)&&void 0!==r?r:0,s:"enga.favorite",t:t.isFavorite?f.J.Favorited:f.J.Unfavorited})))},[null==e?void 0:e.memberId])},P=r(22227),k=(e,t)=>{var r,n=(0,l.I0)(),c=(r=j(),t=>{var{ad:n,favoriteCallBack:i,gtm:c,isFavorite:a,pixel:s,setIsFavorite:u,user:l}=t;r({ad:n,isFavorite:a,memberId:l.memberId,tracking:{detail:"",index:s.trackingIndex,pageSource:s.pixelTrackingPageSource,position:s.pixelTrackingPosition,section:s.pixelTrackingSection,uniqueId:e}});try{(0,P.Z)({adId:n.id,isFavorite:a},l),u&&u(a),i&&i(),a&&function(e){var{ad:t,gtm:r,value:n}=e;o.Z.trigger("favourite_toggle",g(g(g({},(0,p.Z)({ad:t})),r),{},{favorite:n?"1":"0"}))}({ad:n,gtm:c,value:a})}catch(b){console.error(b)}}),{1:b}=(0,i.useContext)(a.S),O=(0,s.aF)();return e=>{var{ad:r,gtm:o,isFavorite:i,pixel:a,setIsFavorite:s}=e;if(!O){var l=e=>{c({ad:r,favoriteCallBack:t,gtm:o,isFavorite:i,pixel:a,setIsFavorite:s,user:e})};n((0,u.m8)({loginState:"pre-login"})),b({payload:{onLoginCallback:l},type:"SET_LOGIN_CALLBACK"});return}c({ad:r,favoriteCallBack:t,gtm:o,isFavorite:i,pixel:a,setIsFavorite:s,user:O})}},w=r(42444),I=r(72737),S=r(25313),_=r(61535);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var D=()=>{var e=(0,s.aF)();return(0,i.useCallback)(t=>{var r,{ad:n,badges:o}=t,i=T(T({},O(t)),{},{component:"phone",et:"click",memberId:null==e?void 0:e.memberId,s:"contact",t:"PHONE_VIEW_LISTING"});o&&(i.badges=o);var c=(0,d.A)(i),a=(0,_.Z)(n.categoryId);(0,I.Z)(c),(0,S.Z)("CONTACT",{category:null==a?void 0:a.nameEn,contact_type:"call",external_id:String(null!==(r=null==e?void 0:e.memberId)&&void 0!==r?r:0)})},[null==e?void 0:e.memberId])},C=()=>{var{0:e,1:t}=(0,i.useState)(!1),r=(0,w.useRouter)(),n=(0,s.aF)(),o=D(),c=(e,t)=>{var i=e.contactInfo.phone,c="1"===r.query.suggest?1:0;o({ad:e,memberId:n?n.memberId:void 0,tracking:{detail:i,index:t.trackingIndex,pageSource:t.pixelTrackingPageSource,position:t.pixelTrackingPosition,section:t.pixelTrackingSection,suggest:c,uniqueId:""}})};return{isShowTelephoneModal:e,onPhoneClick:c,onToggleStatusTelephoneModal(){t(!e)}}};function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var x=()=>{var e=(0,s.aF)();return(0,i.useCallback)(t=>{var r=O(t),n=(0,d.A)(E(E({},r),{},{component:"ad_card",et:"click",memberId:null==e?void 0:e.memberId}));(0,I.Z)(n)},[null==e?void 0:e.memberId])},N=e=>{var t=(0,w.useRouter)(),r=(0,s.aF)(),n=x();return(o,i)=>{var c="1"===t.query.suggest?1:0;n({ad:o,memberId:null==r?void 0:r.memberId,tracking:{detail:"",index:i.trackingIndex,pageSource:i.pixelTrackingPageSource,position:i.pixelTrackingPosition,s:i.pixelTrackingS,section:i.pixelTrackingSection,suggest:c,t:i.pixelTrackingT,uniqueId:e}})}};function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var F=e=>{var{ad:t,adFavoriteStatus:r,customGtmVariables:n,favoriteCallBack:a,gtm:s,onClickCallback:u,pixel:l,uniqueId:p}=e,{0:b,1:g}=(0,i.useState)(r),O=k(p,a),{onPhoneClick:d}=C(),f=N(p),{isShownQuickChatModal:y,handleShowQuickChatModal:v,handleHideQuickChatModal:m}=(0,c.Z)(p),j=()=>{O({ad:t,customGtmVariables:n,gtm:s,isFavorite:!b,pixel:l,setIsFavorite:g})},P=()=>v(),w=()=>m(),I=()=>d(t,l),S=()=>{o.Z.trigger("click",L(L({},t.tracking.gtmData),{},{listing_pagetype:s.listing_pagetype,name:"button",page_section:s.page_section,value:"ad-card",website_section:s.website_section})),u?u():f(t,l)};return{isFavorited:b,isShownQuickChatModal:y,onChat:P,onClickBox:S,onFavorite:j,onHideChat:w,onPhone:I}}},8361:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(68930),o=e=>{var{tracking:{gtmData:{brand:t,condition:r,fuel_type:n,listing_id:o,loc_id_breadcrumb:i,loc_name_breadcrumb:c,mileage:a,model:s,package_type:u,seller_ids:l,year:p}}}=e;return{brand:t,condition:"new"===r?"new":"used",fuel_type:n,listing_id:Number(o),loc_id_breadcrumb:i,loc_name_breadcrumb:c,mileage:a,model:s,package_type:u,seller_ids:Number(l),seller_type:"individual",year:p}},i={Agents:"Agents",auto:"auto",blog:"blog",dealer:"dealer",escrow:"escrow",generalist:"generalist",money:"money","money-property":"money-property",other:"other",profolio:"profolio",property:"property",theme:"theme"};function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var a=e=>{var t,{ad:r,userId:a}=e;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({inspection:null!==(t=r.autoInfo)&&void 0!==t&&t.inspectionReportUrl?"kd_certified":void 0,price:r.price,purpose:"for-sale",userid:a,website_section:function(e){var t=i[e];if(!t){console.log("[mapToGtmWebsiteSection_unknown_value] unknown value, please fix this. value=".concat(e));return}return t}(r.tracking.gtmData.website_section)},o(r))}}}]);